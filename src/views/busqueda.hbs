<head>
    <style>
        .grids {
            height: 60px !important;
        }

        .noPadding {
            padding: 0;
        }

        .mdl-cell--2-col {
            border: solid black !important;
        }
    </style>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
        $(document).ready(() => {

            const height = window.innerHeight - 80;
            document.getElementById('cont').style.height = height + 'px';

        });

        var datos =[
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            [
            ['ID_MEDICION', 'PPM']
            ],
            
        ]

    </script>
    {{#each meds}}
    <script>
        datos[parseInt('{{this.ELEMENTOS_MEDICION_ID}}')].push(['{{meds.ID_MEDICION}}',  parseFloat('{{this.CANTIDAD_PARTICULAS}}')]);
    </script>
    {{/each}}
    {{#each modulos}}
    <script>
        google.charts.load('current', {'packages':['corechart']});

        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {

            // Create the data table.
            var data = google.visualization.arrayToDataTable(datos[parseInt('{{this.ID}}')]);

            // Set chart options
            var options = {
                title: 'Mediciones-Modulo-{{this.ID}}',
                curveType: 'function',
                legend: {position: 'bottom'}
                };

            // Instantiate and draw our chart, passing in some options.
            var chart = new google.visualization.LineChart(document.getElementById('chart_div{{@index}}'));
            chart.draw(data, options);

        }
    </script>
    {{/each}}
</head>

<body>

    <main class="mdl-layout__content mdl-color--grey-100">
        <div class="mdl-grid demo-content" id="cont">
            <div class=" mdl-shadow--2dp mdl-color--white mdl-cell mdl-cell--8-col result">
                {{#each modulos}}
                <div id="chart_div{{@index}}" style="width: 100%; height: 500px"></div>
                {{/each}}
                <table style="width: 100%;" class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
                    <thead>
                        <tr>
                            <th class="mdl-data-table__cell--non-numeric">Modulo</th>
                            <th>Geoposici√≥n</th>
                            <th>PPMillon</th>
                        </tr>
                    </thead>

                    <tbody>
                        {{#each meds}}
                        <tr>
                            <td class="mdl-data-table__cell--non-numeric">{{info.[0].ID}}</td>
                            <td>{{info.[0].UBICACION}}</td>
                            
                            <td>{{this.CANTIDAD_PARTICULAS}}</td>
                        </tr>
                        <tr>
                            <td>{{this.FECHA_HORAD}}</td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>

            </div>
            <div class="demo-graphs mdl-shadow--2dp mdl-color--white mdl-cell mdl-cell--4-col">
                <form method="POST" action="/dashboard">
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="text" id="sample1" name="latitud">
                        <label class="mdl-textfield__label" for="sample1">latitud...</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="text" id="sample2" name="longitud">
                        <label class="mdl-textfield__label" for="sample2">longitud...</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="text" id="fechaIn" name="fechaIn">
                        <label class="mdl-textfield__label" for="fechaIn">Fecha Inicio: aa-mm-dd</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="text" id="fechaFn" name="fechaFn">
                        <label class="mdl-textfield__label" for="fechaIn">Fecha Fin: aa-mm-dd</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="text" id="horaIn" name="HoraInicio">
                        <label class="mdl-textfield__label" for="sample3">HoraInicio...</label>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="text" id="horaFi" name="HoraFin">
                        <label class="mdl-textfield__label" for="sample4">HoraFin...</label>
                    </div>
                    <br>
                    <br>
                    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                        type="submit">
                        Filtrar
                    </button>
                </form>
            </div>
        </div>
    </main>
    </form>
</body>